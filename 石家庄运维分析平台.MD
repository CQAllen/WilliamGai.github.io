
智慧互通科技有限公司
运维分析平台
版本：V1.0接口规范


目录
概述	4
引用标准	4
缩略词	4
接口总体说明 	4
规则定义 	4
请求规则	4
VO定义	4
停车城简明信息ParkingLotBrifVO	5
4.接口	5
获取城市二级区域菜单	5
错误编码定义	10
概述
运维分析平台后台API。
引用标准
缩略词

接口总体说明 
该文档中绿色底色的VO为新增加字段，接口名为蓝色的为新增加接口
规则定义 
	目前文档中相关接口定义仅是业务数据的定义，实际接口调用时还须提供其它信息，后续会逐步完善。
其中蓝色注释的接口为当前版本未添加业务。
请求规则
	所有开放接口请求规则定义：
``` 
param={
"k":"",
"data":{},
"pageNum":"",
"pageSize":"",
"version":""
    }
```
VO定义
定义每一个VO的字段名称和数据类型，具体的接口内容可能包含一个或多个VO、VO数组。
注意：必输项仅限提交时为必填字段。

停车城简明信息ParkingLotBrifVO














4.接口
获取城市二级区域菜单

POST   api/v1/parking/getAllSubAreasByCityId

请求参数
```
{"cityId":"40","k":"eec46209-cefd-45bc-b464-0b8a1b0b2374"}
```
返回参数说明：

Code：0000   成功
          0999  失败

response	  HTTP/1.1 200 OK
```
{
"msg": "操作成功！",
"total": 0,
"code": "0000",
"data": {
"AreaDetail": [
{
"creator": "2095cc11_2c33_11e5_93b9_d8cb8a2a7d6a",
"description": "石家庄-桥西区",
"cityId": "44",
"parentCityId": "40",
"parentId": "6ca06591_5d62_11e6_bd3c_2880239dce10",
"areaCode": "sjz_qiaoxiqu",
"areaId": "465cf662_5d63_11e6_bd3c_2880239dce10",
"areaName": "桥西区",
"synStatus": 0,
"areaType": 0,
"areaLevel": 2,
"createDate": "2016-08-08 20:26:05"
},
{
"creator": "2095cc11_2c33_11e5_93b9_d8cb8a2a7d6a",
"description": "石家庄-裕华区",
"cityId": "47",
"parentCityId": "40",
"parentId": "6ca06591_5d62_11e6_bd3c_2880239dce10",
"areaCode": "sjz_yuhuaqu",
"areaId": "691baca2_5d63_11e6_bd3c_2880239dce10",
"areaName": "裕华区",
"synStatus": 0,
"areaType": 0,
"areaLevel": 2,
"createDate": "2016-08-08 20:27:03"
},
{
"creator": "2095cc11_2c33_11e5_93b9_d8cb8a2a7d6a",
"description": "1111",
"cityId": "45",
"parentCityId": "40",
"parentId": "6ca06591_5d62_11e6_bd3c_2880239dce10",
"areaCode": "xinhua",
"areaId": "864119a6_74a9_11e6_b370_6c92bf2c0bb1",
"areaName": "新华区",
"synStatus": 0,
"areaType": 0,
"areaLevel": 2,
"createDate": "2016-09-07 11:16:53"
},
{
"creator": "2095cc11_2c33_11e5_93b9_d8cb8a2a7d6a",
"description": "石家庄-长安区",
"cityId": "42",
"parentCityId": "40",
"parentId": "6ca06591_5d62_11e6_bd3c_2880239dce10",
"areaCode": "sjz_changanqu",
"areaId": "8922c35f_5d63_11e6_bd3c_2880239dce10",
"areaName": "长安区",
"synStatus": 0,
"areaType": 0,
"areaLevel": 2,
"createDate": "2016-08-08 20:27:57"
}
]
},
"status": true
}
```

response	  HTTP/1.1 200 OK
```
result ={
"total":0,
"status":false,
"data":null,
"code":"9999",
“msg":"错误信息"
}
```



2.根据区域获取停车场
POST  api/v1/parking/getParkingLotBrifsByCityId
请求参数
```
{ "data":{"parkType":3},   "cityId":"42",   "k":"eec46209-cefd-45bc-b464-0b8a1b0b2374"}
```
返回：
```
{
"msg": "操作成功！",
"total": 0,
"code": "0000",
"data": {
"ParkingLotBrifVO": [
{
"parkType": 3,
"image": "http://tog-business-image.oss-cn-beijing.aliyuncs.com/2017/01/12/park/1484188066476.png",
"address": "河北省石家庄市长安区河东街道煤机街40号房管局宿舍(煤机街)",
"parkName": "lyj测试停车场",
"chargeType": null,
"cityId": "42",
"parkCode": "PA20170112103002",
"parkId": "058d7f93_d86f_11e6_96fd_6c92bf2bffb1"
},
{
"parkType": 3,
"image": "http://tog-business-image.oss-cn-beijing.aliyuncs.com/2017/03/10/park/1489122956061.jpg",
"address": "建华大街跃进路交口南侧慢车道",
"parkName": "星河盛世",
"chargeType": null,
"cityId": "42",
"parkCode": "PA20170310131849",
"parkId": "0b269b8e_0551_11e7_96fd_6c92bf2bffb1"
}
]
},
"status": true
}
```
3.根据停车场获取泊车号
POST  api/v1/parking/getSpaceNumbersByParkId
请求参数
```
{"data":{"parkId":"2328f368_04ae_11e7_96fd_6c92bf2bffb1"},"cityId":"42","k":"eec46209-cefd-45bc-b464-0b8a1b0b2374"}
```
返回：
```
{
"msg": "操作成功！",
"total": 0,
"code": "0000",
"data": {
"ParkingSpaceBrifVO": [
{
"berthNumber": "400661",
"parkSpaceId": "02a319d2-04b3-11e7-96fd-6c92bf2bffb1",
"equipmentId": "",
"parkId": "2328f368_04ae_11e7_96fd_6c92bf2bffb1",
"poleNumber": "4#",
"spaceCode": "PS20170309175241025"
},
{
"berthNumber": "400662",
"parkSpaceId": "099aa79a-04b3-11e7-96fd-6c92bf2bffb1",
"equipmentId": "",
"parkId": "2328f368_04ae_11e7_96fd_6c92bf2bffb1",
"poleNumber": "4#",
"spaceCode": "PS20170309175241026"
]
},
"status": true
}
```
4.根据搜索条件返回停车记录列表
POST URI:  api/v1/parking/getParkingRecord
请求参数:
```
{"data":{"parkId":"2328f368_04ae_11e7_96fd_6c92bf2bffb1","startTime":"2017-07-01 00:00:00","endTime":"2017-07-04 23:59:59"},"cityId":"42","k":"eec46209-cefd-45bc-b464-0b8a1b0b2374"}
```
```
{"data":{"parkId":"2328f368_04ae_11e7_96fd_6c92bf2bffb1","startTime":"2017-07-01 00:00:00","endTime":"2017-07-04 23:59:59","plateNumber": "冀ABC111"},"cityId":"42","k":"eec46209-cefd-45bc-b464-0b8a1b0b2374"}
```
参数说明：
parkId  停车场ID
 areaId 区ID
 parkType 停车场类型
berthNumber 泊车号 可以模糊搜索
plateNumber 车牌号
 isValid 记录类型 1为有效 0为无效
entryExitType 出入场类型 “entry” 为入场

返回：
```
{
"msg": "操作成功！",
"total": 0,
"code": "0000",
"data": {
"ParkingSpaceBrifVO": [
{
"berthNumber": "301628",
"parkName": "华西路发改委宿舍",
"shouldPay": "0.00",
"entryEquipment": "2",
"plateNumber": "冀ABC111",
"parkId": "22411ac3_0236_11e7_96fd_6c92bf2bffb1",
"parkType": "3",
"entryTime": "2017-03-14 10:35:13",
"exitTime": "2017-03-14 10:39:03",
"parkRecordId": "000792d6_085f_11e7_96fd_6c92bf2bffb1",
"areaName": "新华区",
"exitEquipmentId": "9"
},
{
"berthNumber": null,
"parkName": "封闭专用停车场QQ（勿动）",
"shouldPay": "18.00",
"entryEquipment": "3",
"plateNumber": "冀SS0103",
"parkId": "f28144e9_dca0_11e6_96fd_6c92bf2bffb1",
"parkType": "3",
"entryTime": "2017-02-22 06:32:27",
"exitTime": "2017-02-23 11:23:12",
"parkRecordId": "00231429_f8fb_11e6_96fd_6c92bf2bffb1",
"areaName": "桥西区",
"exitEquipmentId": "3"
}
]
},
"status": true
}
```
错误编码定义
